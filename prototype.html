<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal UX Portfolio Prototype</title>
    <link rel="stylesheet" href="prototype.css">
</head>

<body>

    <canvas id="matrix-canvas"></canvas>

    <div id="portfolio-device" class="device-container">
        <!-- The top bar that acts as the trigger button initially -->
        <div class="top-bar" id="top-bar">
            <!-- (rest of device container is unaffected) -->
            <div class="bar-left">
                <span>Raghavs portfolio site</span>
            </div>
            <div class="bar-right">
                <div class="circle"></div>
                <span>Press to open the site</span>
            </div>
            <div class="hover-arrow">â†“</div>
        </div>

        <div class="site-content" id="scrollable-content">
            <!-- Intro Hero Box (No longer a bento card) -->
            <div class="hero" style="padding: 0 0 24px 0;">
                <h1
                    style="font-size: 2rem; font-weight: 700; margin-bottom: 12px; letter-spacing: -0.04em; color: #111;">
                    Hi! I'm Raghav.</h1>
                <p style="font-size: 1rem; color: #666; line-height: 1.5;">Mid-level <b>Digital Product Designer</b>
                    based in the US with a background in game mechanics.</p>
            </div>

            <!-- 3D Model Placeholder -->
            <div class="model-placeholder" style="background: transparent; border: none; padding-bottom: 24px;">
                <span class="model-text" style="color: #888; font-size: 14px;">[ 3D Model Placeholder ]</span>
            </div>

            <!-- Socials Box -->
            <div class="bento-item delay-1" style="padding: 16px; margin-bottom: 24px;">
                <div class="socials" style="gap: 8px;">
                    <a href="https://www.behance.net/raghavprasanna" target="_blank" class="social-link">Behance</a>
                    <a href="https://dribbble.com/DEDROX2K" target="_blank" class="social-link">Dribbble</a>
                    <a href="https://www.linkedin.com/in/raghav-prasanna-b530621b0/" target="_blank"
                        class="social-link">LinkedIn</a>
                    <a href="https://www.artstation.com/raghavprasanna" target="_blank"
                        class="social-link">Artstation</a>
                    <a href="https://www.fiverr.com/dedrox_" target="_blank" class="social-link">Freelance</a>
                </div>
            </div>

            <!-- Priority Case Studies -->
            <!-- Case 1 -->
            <a href="Case1.html" class="bento-item project-card delay-2" style="margin-bottom: 24px; display: block;">
                <div class="badge" style="position: absolute; top: 16px; left: 16px; z-index: 10;">App</div>
                <img src="images/port1.jpg" alt="Clear Breath App" class="project-image">
                <div class="project-info">
                    <h3 class="project-title">Clear Breath CBT App</h3>
                    <p class="project-summary">App to assist addicts in quitting smoking by integrating Cognitive
                        Behavioral Therapy techniques.</p>
                    <p class="project-summary" style="font-size: 0.85rem; color: #111; margin-bottom: 0;">
                        <strong>Impact:</strong> Made the app 3X more efficient.
                    </p>
                </div>
            </a>

            <!-- Case 2 -->
            <a href="Case2.html" class="bento-item project-card delay-2" style="margin-bottom: 24px; display: block;">
                <div class="badge" style="position: absolute; top: 16px; left: 16px; z-index: 10;">AR Application</div>
                <img src="images/port2.jpg" alt="AR Airport Navigation" class="project-image">
                <div class="project-info">
                    <h3 class="project-title">AR Airport Navigation</h3>
                    <p class="project-summary">AR app designed to simplify navigation in complex airports and enhance
                        the travel experience.</p>
                </div>
            </a>

            <!-- Additional Projects -->
            <a href="https://www.behance.net/gallery/200529521/CLEAR-BREATH-case-study-No-smoking-app" target="_blank"
                class="bento-item project-card delay-3" style="margin-bottom: 24px; display: block;">
                <img src="images/portpie 2.png" alt="Detailed Smoking App Project" class="project-image">
                <div class="project-info">
                    <span class="badge" style="margin-bottom: 8px;">Case Study</span>
                    <h3 class="project-title">Clear Breath Detail</h3>
                </div>
            </a>

            <a href="https://medium.com/@RaghavPrasannaUX/case-study-gym-finder-app-3ac05a38abe3" target="_blank"
                class="bento-item project-card delay-3" style="margin-bottom: 24px; display: block;">
                <img src="images/portpie 3.png" alt="Gym Finder App" class="project-image">
                <div class="project-info">
                    <span class="badge" style="margin-bottom: 8px;">Mini Case Study</span>
                    <h3 class="project-title">Gym Finder Application</h3>
                </div>
            </a>

            <!-- Desk Research -->
            <a href="case3.html" class="bento-item project-card delay-3" style="margin-bottom: 24px; display: block;">
                <img src="images/port4.jpg" alt="Desk Research" class="project-image">
                <div class="project-info">
                    <span class="badge" style="margin-bottom: 8px;">Research</span>
                    <h3 class="project-title">Desk Research</h3>
                </div>
            </a>

            <!-- Fiverr image -->
            <div style="margin: 40px 0 24px;">
                <a class="justify-content-center align-items-center" target="_blank"
                    href="https://www.fiverr.com/dedrox_"
                    style="display: block; width: 100%; transition: transform 0.3s ease; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.05); cursor: pointer;">
                    <img style="width: 100%; height: auto; display: block;" src="images/allrevs.png"
                        alt="Fiverr Reviews">
                </a>
            </div>

            <!-- Consultation button -->
            <div id="pagesec4" style="margin: 0 0 40px; text-align: center;">
                <div class="consu">
                    <div class="custom-container text-center consutex"
                        style="margin-bottom: 20px; font-family: 'Instrument Serif', Georgia, serif; font-size: 1.5rem; line-height: 1.2; color: #242424; font-weight: 500;">
                        <span>Have an idea? Let's talk. I'm currently interested in projects related to games,
                            softwares, Applications or Corporate projects. <br></span>
                    </div>
                    <a href="index.html" style="display: inline-block;">
                        <div class="consubtn"
                            style="background-color: #f0f0f0; color: #242424; border-radius: 100px; font-size: 1rem; padding: 1rem 1.5rem; font-weight: 600; letter-spacing: 0.1rem; box-shadow: inset 0 1px 0 0 #f4f4f4, 0 1px 0 0 #efefef, 0 2px 0 0 #ececec, 0 4px 0 0 #e0e0e0, 0 5px 0 0 #dedede; transition: transform 0.25s ease, box-shadow 0.25s ease; cursor: pointer;">
                            SEND ME A QUICK MESSAGE
                        </div>
                    </a>
                </div>
            </div>

        </div>

        <div class="bottom-bar"></div>
    </div>

    <script>
        // --------------------------------------------------------
        // EXPAND / COLLAPSE UI LOGIC
        // --------------------------------------------------------
        const device = document.getElementById('portfolio-device');
        const topBar = document.getElementById('top-bar');

        topBar.addEventListener('click', (e) => {
            if (!device.classList.contains('expanded')) {
                device.classList.add('expanded');
                e.stopPropagation();
            }
        });

        document.body.addEventListener('click', (e) => {
            if (device.classList.contains('expanded') && !device.contains(e.target)) {
                device.classList.remove('expanded');
            }
        });

        // --------------------------------------------------------
        // LIQUID MATRIX BACKGROUND LOGIC
        // --------------------------------------------------------
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        const fontFace = 'monospace';
        const characters = '.:`+-*/^';
        const cellSize = 10;
        const maxDpr = Math.min(window.devicePixelRatio || 1, 1.2);
        const renderScale = 0.5;
        const targetFps = 30;
        const frameInterval = 1000 / targetFps;
        const maxTrailPoints = 20;
        const trailFade = 0.94;

        let cols = 0;
        let rows = 0;
        let grid = [];
        let cssToCanvasX = 1;
        let cssToCanvasY = 1;
        let lastFrameTime = 0;
        let trail = [];

        const pointer = {
            x: 0,
            y: 0,
            tx: 0,
            ty: 0,
            active: false
        };

        function resize() {
            const width = Math.max(360, Math.floor(window.innerWidth * maxDpr * renderScale));
            const height = Math.max(220, Math.floor(window.innerHeight * maxDpr * renderScale));
            canvas.width = width;
            canvas.height = height;
            canvas.style.width = window.innerWidth + 'px';
            canvas.style.height = window.innerHeight + 'px';

            cssToCanvasX = canvas.width / window.innerWidth;
            cssToCanvasY = canvas.height / window.innerHeight;
            cols = Math.floor(canvas.width / cellSize);
            rows = Math.floor(canvas.height / cellSize);
            initGrid();
        }

        function initGrid() {
            grid = new Array(cols * rows);
            for (let i = 0; i < cols; i++) {
                for (let j = 0; j < rows; j++) {
                    const idx = i * rows + j;
                    grid[idx] = {
                        x: i * cellSize + cellSize / 2,
                        y: j * cellSize + cellSize / 2,
                        char: characters.charAt(Math.floor(Math.random() * characters.length)),
                        baseColor: 120 + Math.floor(Math.random() * 16),
                        currentColor: 126,
                        lastUpdate: Math.random() * 90
                    };
                }
            }
        }

        function addTrailPoint(x, y) {
            const last = trail[trail.length - 1];
            if (!last) {
                trail.push({ x, y, life: 1 });
            } else {
                const dx = x - last.x;
                const dy = y - last.y;
                if ((dx * dx + dy * dy) > 30) {
                    trail.push({ x, y, life: 1 });
                }
            }

            if (trail.length > maxTrailPoints) {
                trail.shift();
            }
        }

        function updateTrail() {
            if (pointer.active) {
                pointer.x += (pointer.tx - pointer.x) * 0.2;
                pointer.y += (pointer.ty - pointer.y) * 0.2;
                addTrailPoint(pointer.x, pointer.y);
            }

            for (let i = trail.length - 1; i >= 0; i--) {
                trail[i].life *= trailFade;
                if (trail[i].life < 0.035) {
                    trail.splice(i, 1);
                }
            }
        }

        function pointToSegmentDistSq(px, py, ax, ay, bx, by) {
            const abx = bx - ax;
            const aby = by - ay;
            const apx = px - ax;
            const apy = py - ay;
            const ab2 = abx * abx + aby * aby;
            if (ab2 < 0.0001) {
                return apx * apx + apy * apy;
            }
            const t = Math.max(0, Math.min(1, (apx * abx + apy * aby) / ab2));
            const qx = ax + abx * t;
            const qy = ay + aby * t;
            const dx = px - qx;
            const dy = py - qy;
            return dx * dx + dy * dy;
        }

        function liquidInfluence(x, y) {
            let strongest = 0;
            if (trail.length < 2) return strongest;

            const radius = 62 * renderScale * maxDpr;
            const radiusSq = radius * radius;

            for (let i = 1; i < trail.length; i++) {
                const a = trail[i - 1];
                const b = trail[i];
                const life = (a.life + b.life) * 0.5;
                if (life < 0.06) continue;

                const d2 = pointToSegmentDistSq(x, y, a.x, a.y, b.x, b.y);
                if (d2 > radiusSq) continue;

                const norm = 1 - (d2 / radiusSq);
                const influence = norm * norm * life;
                if (influence > strongest) {
                    strongest = influence;
                }
            }
            return strongest;
        }

        function drawGradientField(t) {
            ctx.fillStyle = '#f4f4f4';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const time = t * 0.00035;
            const minSide = Math.min(canvas.width, canvas.height);

            const g1x = canvas.width * (0.24 + Math.sin(time * 1.2) * 0.08);
            const g1y = canvas.height * (0.28 + Math.cos(time * 0.9) * 0.1);
            const g1r = minSide * 0.78;
            const grad1 = ctx.createRadialGradient(g1x, g1y, 0, g1x, g1y, g1r);
            grad1.addColorStop(0, 'rgba(222, 222, 222, 0.26)');
            grad1.addColorStop(1, 'rgba(222, 222, 222, 0)');
            ctx.fillStyle = grad1;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const g2x = canvas.width * (0.72 + Math.cos(time * 0.8) * 0.09);
            const g2y = canvas.height * (0.64 + Math.sin(time * 1.1) * 0.08);
            const g2r = minSide * 0.7;
            const grad2 = ctx.createRadialGradient(g2x, g2y, 0, g2x, g2y, g2r);
            grad2.addColorStop(0, 'rgba(205, 205, 205, 0.2)');
            grad2.addColorStop(1, 'rgba(205, 205, 205, 0)');
            ctx.fillStyle = grad2;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function drawTrailWash() {
            if (trail.length < 2) return;
            ctx.save();
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            for (let i = 1; i < trail.length; i++) {
                const a = trail[i - 1];
                const b = trail[i];
                const life = (a.life + b.life) * 0.5;
                if (life < 0.05) continue;
                ctx.strokeStyle = `rgba(176, 176, 176, ${0.18 * life})`;
                ctx.lineWidth = (8 + 64 * life) * renderScale;
                ctx.beginPath();
                ctx.moveTo(a.x, a.y);
                ctx.lineTo(b.x, b.y);
                ctx.stroke();
            }
            ctx.restore();
        }

        function draw(timestamp) {
            if (timestamp - lastFrameTime < frameInterval) {
                requestAnimationFrame(draw);
                return;
            }
            lastFrameTime = timestamp;

            updateTrail();
            drawGradientField(timestamp);
            drawTrailWash();

            ctx.font = cellSize + 'px ' + fontFace;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            for (let i = 0; i < grid.length; i++) {
                const cell = grid[i];
                const influence = liquidInfluence(cell.x, cell.y);

                if (influence > 0.05) {
                    if (Math.random() < (0.2 + influence * 0.45)) {
                        cell.char = characters.charAt(Math.floor(Math.random() * characters.length));
                    }
                    const liquidTarget = Math.max(66, cell.baseColor - influence * 62);
                    cell.currentColor += (liquidTarget - cell.currentColor) * 0.32;
                } else {
                    cell.lastUpdate++;
                    if (cell.lastUpdate > 130) {
                        if (Math.random() > 0.988) {
                            cell.char = characters.charAt(Math.floor(Math.random() * characters.length));
                        }
                        cell.lastUpdate = 0;
                    }
                    cell.currentColor += (cell.baseColor - cell.currentColor) * 0.08;
                }

                const v = Math.floor(cell.currentColor);
                ctx.fillStyle = `rgb(${v}, ${v}, ${v})`;
                ctx.fillText(cell.char, cell.x, cell.y);
            }

            requestAnimationFrame(draw);
        }

        window.addEventListener('mousemove', (e) => {
            pointer.tx = e.clientX * cssToCanvasX;
            pointer.ty = e.clientY * cssToCanvasY;
            if (!pointer.active) {
                pointer.active = true;
                pointer.x = pointer.tx;
                pointer.y = pointer.ty;
                addTrailPoint(pointer.x, pointer.y);
            }
        });

        window.addEventListener('mouseleave', () => {
            pointer.active = false;
        });

        window.addEventListener('blur', () => {
            pointer.active = false;
        });

        // Init
        window.addEventListener('resize', resize);
        resize();
        requestAnimationFrame(draw);

    </script>
</body>

</html>
