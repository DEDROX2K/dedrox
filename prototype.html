<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal UX Portfolio Prototype</title>
    <link rel="stylesheet" href="prototype.css">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>

<body>

    <canvas id="matrix-canvas"></canvas>

    <div id="portfolio-device" class="device-container">
        <div class="top-bar" id="top-bar">
            <div class="bar-left">
                <span>Raghav's Portfolio</span>
            </div>
            <div class="bar-right">
                <div class="circle"></div>
                <span>Press to open</span>
            </div>
            <div class="hover-arrow">↓</div>
        </div>

        <div class="site-content" id="scrollable-content">
            <section class="hero-grid reveal delay-1">
                <div class="hero-copy">
                    <h1>Designing products that feel effortless.</h1>
                    <p>
                        Product designer based in the US with a game-mechanics background.
                        I focus on fast clarity, practical UX decisions, and clean execution.
                    </p>
                </div>
                <div class="hero-model">
                    <model-viewer src="threeD/Tintanic.glb" alt="3D model" camera-controls auto-rotate
                        rotation-per-second="20deg" exposure="1.1" shadow-intensity="0"></model-viewer>
                </div>
            </section>

            <nav class="links-row reveal delay-2" aria-label="Primary Links">
                <a href="https://www.behance.net/raghavprasanna" target="_blank" class="brand-link">
                    Behance
                    <img class="brand-pop" src="images/DEDROX.DSGN/dedroxLogo.svg" alt="Brand logo">
                </a>
                <a href="https://dribbble.com/DEDROX2K" target="_blank" class="brand-link">
                    Dribbble
                    <img class="brand-pop" src="images/DEDROX.DSGN/dedroxLogo.svg" alt="Brand logo">
                </a>
                <a href="https://www.linkedin.com/in/raghav-prasanna-b530621b0/" target="_blank" class="brand-link">
                    LinkedIn
                    <img class="brand-pop" src="images/DEDROX.DSGN/dedroxLogo.svg" alt="Brand logo">
                </a>
                <a href="https://www.artstation.com/raghavprasanna" target="_blank" class="brand-link">
                    Artstation
                    <img class="brand-pop" src="images/DEDROX.DSGN/dedroxLogo.svg" alt="Brand logo">
                </a>
                <a href="https://www.fiverr.com/dedrox_" target="_blank" class="brand-link">
                    Freelance
                    <img class="brand-pop" src="images/DEDROX.DSGN/dedroxLogo.svg" alt="Brand logo">
                </a>
            </nav>

            <section class="company-dock-section reveal delay-2" aria-label="Companies worked with">
                <p class="dock-kicker">Companies I've worked with</p>
                <div class="company-dock" id="company-dock">
                    <button class="dock-item" type="button" aria-label="Company 1 placeholder">
                        <span class="dock-tooltip">Company 1</span>
                        <span class="dock-logo">C1</span>
                    </button>
                    <button class="dock-item" type="button" aria-label="Company 2 placeholder">
                        <span class="dock-tooltip">Company 2</span>
                        <span class="dock-logo">C2</span>
                    </button>
                    <button class="dock-item" type="button" aria-label="Company 3 placeholder">
                        <span class="dock-tooltip">Company 3</span>
                        <span class="dock-logo">C3</span>
                    </button>
                    <button class="dock-item" type="button" aria-label="Company 4 placeholder">
                        <span class="dock-tooltip">Company 4</span>
                        <span class="dock-logo">C4</span>
                    </button>
                    <button class="dock-item" type="button" aria-label="Company 5 placeholder">
                        <span class="dock-tooltip">Company 5</span>
                        <span class="dock-logo">C5</span>
                    </button>
                    <button class="dock-item" type="button" aria-label="Company 6 placeholder">
                        <span class="dock-tooltip">Company 6</span>
                        <span class="dock-logo">C6</span>
                    </button>
                </div>
            </section>

            <section class="case-studies reveal delay-2">
                <a href="Case1.html" class="case-card">
                    <img src="images/port1.jpg" alt="Clear Breath App">
                    <div class="case-content">
                        <p class="kicker">Case Study</p>
                        <h3>Clear Breath CBT App</h3>
                        <p>Reduced the critical logging flow from 7 steps to 3 while improving retention and task clarity.</p>
                    </div>
                </a>
                <a href="Case2.html" class="case-card">
                    <img src="images/port2.jpg" alt="AR Airport Navigation">
                    <div class="case-content">
                        <p class="kicker">Case Study</p>
                        <h3>AR Airport Navigation</h3>
                        <p>Wayfinding and companion-finder flows designed for complex terminals and high-stress travel moments.</p>
                    </div>
                </a>
            </section>

            <section class="reveal delay-3">
                <h2 class="more-title">More Projects</h2>
                <div class="project-grid">
                    <a href="https://www.behance.net/gallery/200529521/CLEAR-BREATH-case-study-No-smoking-app" target="_blank"
                        class="project-card">
                        <img src="images/portpie 2.png" alt="Detailed Smoking App">
                        <div class="project-info">
                            <h3>Clear Breath Detail</h3>
                            <p>Extended flow documentation and behavior design.</p>
                        </div>
                    </a>

                    <a href="https://medium.com/@RaghavPrasannaUX/case-study-gym-finder-app-3ac05a38abe3" target="_blank"
                        class="project-card">
                        <img src="images/portpie 3.png" alt="Gym Finder">
                        <div class="project-info">
                            <h3>Gym Finder App</h3>
                            <p>Travel-focused utility for quick gym discovery.</p>
                        </div>
                    </a>

                    <a href="case3.html" class="project-card">
                        <img src="images/port4.jpg" alt="Desk Research">
                        <div class="project-info">
                            <h3>Desk Research</h3>
                            <p>Early-stage market and problem framing process.</p>
                        </div>
                    </a>

                    <a href="https://dribbble.com/DEDROX2K" target="_blank" class="project-card">
                        <img src="images/portpie 5.png" alt="UI Exploration">
                        <div class="project-info">
                            <h3>UI Exploration</h3>
                            <p>Interface pattern studies and visual systems.</p>
                        </div>
                    </a>
                </div>

                <section class="github-chart-block" aria-label="GitHub contributions">
                    <img id="github-chart-img" src="https://ghchart.rshah.org/111111/raghavprasanna"
                        alt="GitHub contributions chart">
                </section>
            </section>

            <section class="full-bleed-wrap reveal delay-3" aria-label="Featured image">
                <img src="images/allrevs.png" alt="Featured full-width visual">
            </section>

            <section class="pixel-section reveal delay-4">
                <h2 class="pixel-title">Draw Pixel Art</h2>
                <p class="pixel-sub">Quick octagon sketch board. 6 colors. Reload clears it.</p>
                <div class="pixel-tools" id="pixel-palette"></div>
                <div class="pixel-canvas-wrap">
                    <canvas id="pixel-canvas" width="40" height="40" aria-label="Pixel drawing canvas"></canvas>
                </div>
            </section>

            <section class="contact-block reveal delay-5">
                <p class="contact-location">
                    <span class="location-main">New York, NY</span>
                    <span class="location-sub">(currently traveling)</span>
                </p>
                <p class="contact-time" id="live-time">--</p>
                <a href="index.html" class="contact-btn">Contact ↗</a>
            </section>

            <footer class="footer reveal delay-5">
                <div class="footer-grid">
                    <div class="footer-contact">
                        <h3>Contact Me</h3>
                        <p>
                            <a href="https://www.linkedin.com/in/raghav-prasanna-b530621b0/" target="_blank">linkedin.com/raghav-prasanna</a><br>
                            raghavprasanna2000@gmail.com<br>
                            +44 7553 433334
                        </p>
                    </div>
                    <div class="footer-links">
                        <h3>Follow Me</h3>
                        <ul>
                            <li><a href="https://www.behance.net/raghavprasanna" target="_blank">Behance</a></li>
                            <li><a href="https://www.artstation.com/raghavprasanna" target="_blank">Artstation</a></li>
                            <li><a href="https://www.instagram.com/dedrox__/?hl=en" target="_blank">Instagram</a></li>
                            <li><a href="https://medium.com/@RaghavPrasannaUX" target="_blank">Medium</a></li>
                            <li><a href="https://www.youtube.com/@dedrox3d491/videos" target="_blank">Youtube</a></li>
                            <li><a href="https://codepen.io/Raghav-Prasanna-Lakshminarayanan" target="_blank">Codepen</a></li>
                            <li><a href="https://dribbble.com/DEDROX2K" target="_blank">Dribbble</a></li>
                            <li><a href="https://letterboxd.com/dedrox/films/reviews/" target="_blank">Letterboxd</a></li>
                            <li><a href="https://www.instagram.com/raghavprasanna_photography/?hl=en" target="_blank">Photography</a></li>
                            <li><a href="https://sketchfab.com/Raghavprasanna" target="_blank">Sketchfab</a></li>
                        </ul>
                    </div>
                </div>
                <img src="images/footerhand.png" alt="Footer visual" class="footer-hand">
            </footer>
        </div>

        <div class="bottom-bar"></div>
    </div>

    <script>
        const device = document.getElementById('portfolio-device');
        const topBar = document.getElementById('top-bar');

        topBar.addEventListener('click', (e) => {
            if (!device.classList.contains('expanded')) {
                device.classList.add('expanded');
                e.stopPropagation();
            }
        });

        document.body.addEventListener('click', (e) => {
            if (device.classList.contains('expanded') && !device.contains(e.target)) {
                device.classList.remove('expanded');
            }
        });

        // --------------------------------------------------------
        // LIQUID MATRIX BACKGROUND LOGIC
        // --------------------------------------------------------
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        const fontFace = 'monospace';
        const characters = '.:`+-*/^';
        const cellSize = 10;
        const maxDpr = Math.min(window.devicePixelRatio || 1, 1.2);
        const renderScale = 0.5;
        const targetFps = 30;
        const frameInterval = 1000 / targetFps;
        const maxTrailPoints = 20;
        const trailFade = 0.94;

        let cols = 0;
        let rows = 0;
        let grid = [];
        let cssToCanvasX = 1;
        let cssToCanvasY = 1;
        let lastFrameTime = 0;
        let trail = [];

        const pointer = {
            x: 0,
            y: 0,
            tx: 0,
            ty: 0,
            active: false
        };

        function resize() {
            const width = Math.max(360, Math.floor(window.innerWidth * maxDpr * renderScale));
            const height = Math.max(220, Math.floor(window.innerHeight * maxDpr * renderScale));
            canvas.width = width;
            canvas.height = height;
            canvas.style.width = window.innerWidth + 'px';
            canvas.style.height = window.innerHeight + 'px';

            cssToCanvasX = canvas.width / window.innerWidth;
            cssToCanvasY = canvas.height / window.innerHeight;
            cols = Math.floor(canvas.width / cellSize);
            rows = Math.floor(canvas.height / cellSize);
            initGrid();
        }

        function initGrid() {
            grid = new Array(cols * rows);
            for (let i = 0; i < cols; i++) {
                for (let j = 0; j < rows; j++) {
                    const idx = i * rows + j;
                    grid[idx] = {
                        x: i * cellSize + cellSize / 2,
                        y: j * cellSize + cellSize / 2,
                        char: characters.charAt(Math.floor(Math.random() * characters.length)),
                        baseColor: 120 + Math.floor(Math.random() * 16),
                        currentColor: 126,
                        lastUpdate: Math.random() * 90
                    };
                }
            }
        }

        function addTrailPoint(x, y) {
            const last = trail[trail.length - 1];
            if (!last) {
                trail.push({ x, y, life: 1 });
            } else {
                const dx = x - last.x;
                const dy = y - last.y;
                if ((dx * dx + dy * dy) > 30) {
                    trail.push({ x, y, life: 1 });
                }
            }

            if (trail.length > maxTrailPoints) {
                trail.shift();
            }
        }

        function updateTrail() {
            if (pointer.active) {
                pointer.x += (pointer.tx - pointer.x) * 0.2;
                pointer.y += (pointer.ty - pointer.y) * 0.2;
                addTrailPoint(pointer.x, pointer.y);
            }

            for (let i = trail.length - 1; i >= 0; i--) {
                trail[i].life *= trailFade;
                if (trail[i].life < 0.035) {
                    trail.splice(i, 1);
                }
            }
        }

        function pointToSegmentDistSq(px, py, ax, ay, bx, by) {
            const abx = bx - ax;
            const aby = by - ay;
            const apx = px - ax;
            const apy = py - ay;
            const ab2 = abx * abx + aby * aby;
            if (ab2 < 0.0001) {
                return apx * apx + apy * apy;
            }
            const t = Math.max(0, Math.min(1, (apx * abx + apy * aby) / ab2));
            const qx = ax + abx * t;
            const qy = ay + aby * t;
            const dx = px - qx;
            const dy = py - qy;
            return dx * dx + dy * dy;
        }

        function liquidInfluence(x, y) {
            let strongest = 0;
            if (trail.length < 2) return strongest;

            const radius = 62 * renderScale * maxDpr;
            const radiusSq = radius * radius;

            for (let i = 1; i < trail.length; i++) {
                const a = trail[i - 1];
                const b = trail[i];
                const life = (a.life + b.life) * 0.5;
                if (life < 0.06) continue;

                const d2 = pointToSegmentDistSq(x, y, a.x, a.y, b.x, b.y);
                if (d2 > radiusSq) continue;

                const norm = 1 - (d2 / radiusSq);
                const influence = norm * norm * life;
                if (influence > strongest) {
                    strongest = influence;
                }
            }
            return strongest;
        }

        function drawGradientField(t) {
            ctx.fillStyle = '#f4f4f4';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const time = t * 0.00035;
            const minSide = Math.min(canvas.width, canvas.height);

            const g1x = canvas.width * (0.24 + Math.sin(time * 1.2) * 0.08);
            const g1y = canvas.height * (0.28 + Math.cos(time * 0.9) * 0.1);
            const g1r = minSide * 0.78;
            const grad1 = ctx.createRadialGradient(g1x, g1y, 0, g1x, g1y, g1r);
            grad1.addColorStop(0, 'rgba(222, 222, 222, 0.26)');
            grad1.addColorStop(1, 'rgba(222, 222, 222, 0)');
            ctx.fillStyle = grad1;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const g2x = canvas.width * (0.72 + Math.cos(time * 0.8) * 0.09);
            const g2y = canvas.height * (0.64 + Math.sin(time * 1.1) * 0.08);
            const g2r = minSide * 0.7;
            const grad2 = ctx.createRadialGradient(g2x, g2y, 0, g2x, g2y, g2r);
            grad2.addColorStop(0, 'rgba(205, 205, 205, 0.2)');
            grad2.addColorStop(1, 'rgba(205, 205, 205, 0)');
            ctx.fillStyle = grad2;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function drawTrailWash() {
            if (trail.length < 2) return;
            ctx.save();
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            for (let i = 1; i < trail.length; i++) {
                const a = trail[i - 1];
                const b = trail[i];
                const life = (a.life + b.life) * 0.5;
                if (life < 0.05) continue;
                ctx.strokeStyle = `rgba(176, 176, 176, ${0.18 * life})`;
                ctx.lineWidth = (8 + 64 * life) * renderScale;
                ctx.beginPath();
                ctx.moveTo(a.x, a.y);
                ctx.lineTo(b.x, b.y);
                ctx.stroke();
            }
            ctx.restore();
        }

        function draw(timestamp) {
            if (timestamp - lastFrameTime < frameInterval) {
                requestAnimationFrame(draw);
                return;
            }
            lastFrameTime = timestamp;

            updateTrail();
            drawGradientField(timestamp);
            drawTrailWash();

            ctx.font = cellSize + 'px ' + fontFace;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            for (let i = 0; i < grid.length; i++) {
                const cell = grid[i];
                const influence = liquidInfluence(cell.x, cell.y);

                if (influence > 0.05) {
                    if (Math.random() < (0.2 + influence * 0.45)) {
                        cell.char = characters.charAt(Math.floor(Math.random() * characters.length));
                    }
                    const liquidTarget = Math.max(66, cell.baseColor - influence * 62);
                    cell.currentColor += (liquidTarget - cell.currentColor) * 0.32;
                } else {
                    cell.lastUpdate++;
                    if (cell.lastUpdate > 130) {
                        if (Math.random() > 0.988) {
                            cell.char = characters.charAt(Math.floor(Math.random() * characters.length));
                        }
                        cell.lastUpdate = 0;
                    }
                    cell.currentColor += (cell.baseColor - cell.currentColor) * 0.08;
                }

                const v = Math.floor(cell.currentColor);
                ctx.fillStyle = `rgb(${v}, ${v}, ${v})`;
                ctx.fillText(cell.char, cell.x, cell.y);
            }

            requestAnimationFrame(draw);
        }

        window.addEventListener('mousemove', (e) => {
            pointer.tx = e.clientX * cssToCanvasX;
            pointer.ty = e.clientY * cssToCanvasY;
            if (!pointer.active) {
                pointer.active = true;
                pointer.x = pointer.tx;
                pointer.y = pointer.ty;
                addTrailPoint(pointer.x, pointer.y);
            }
        });

        window.addEventListener('mouseleave', () => {
            pointer.active = false;
        });

        window.addEventListener('blur', () => {
            pointer.active = false;
        });

        // --------------------------------------------------------
        // COMPANY DOCK HOVER MAGNIFICATION
        // --------------------------------------------------------
        function initCompanyDock() {
            const dock = document.getElementById('company-dock');
            if (!dock) return;
            const items = Array.from(dock.querySelectorAll('.dock-item'));
            if (!items.length) return;

            const maxDistance = 160;
            const maxScaleBoost = 0.85;
            const maxLift = 18;

            function resetDock() {
                items.forEach((item) => {
                    item.style.setProperty('--scale', '1');
                    item.style.setProperty('--lift', '0px');
                });
            }

            dock.addEventListener('mousemove', (e) => {
                const pointerX = e.clientX;
                items.forEach((item) => {
                    const rect = item.getBoundingClientRect();
                    const centerX = rect.left + rect.width * 0.5;
                    const distance = Math.abs(pointerX - centerX);
                    const t = Math.max(0, 1 - (distance / maxDistance));
                    const eased = t * t;
                    const scale = 1 + (eased * maxScaleBoost);
                    const lift = -(eased * maxLift);
                    item.style.setProperty('--scale', scale.toFixed(3));
                    item.style.setProperty('--lift', `${lift.toFixed(2)}px`);
                });
            });

            dock.addEventListener('mouseleave', resetDock);
            window.addEventListener('blur', resetDock);
            resetDock();
        }

        // --------------------------------------------------------
        // PIXEL DRAW CANVAS
        // --------------------------------------------------------
        const pixelCanvas = document.getElementById('pixel-canvas');
        const pixelCtx = pixelCanvas.getContext('2d');
        const paletteRoot = document.getElementById('pixel-palette');
        const palette = ['#111111', '#ff3b30', '#ffcc00', '#34c759', '#0a84ff', '#bf5af2'];
        const pixelSize = 1;
        let drawing = false;
        let activeColor = palette[0];

        function buildPalette() {
            palette.forEach((color, index) => {
                const swatch = document.createElement('button');
                swatch.className = 'swatch' + (index === 0 ? ' active' : '');
                swatch.style.background = color;
                swatch.type = 'button';
                swatch.setAttribute('aria-label', `Select color ${index + 1}`);
                swatch.addEventListener('click', () => {
                    activeColor = color;
                    document.querySelectorAll('.swatch').forEach((s) => s.classList.remove('active'));
                    swatch.classList.add('active');
                });
                paletteRoot.appendChild(swatch);
            });

            const clearBtn = document.createElement('button');
            clearBtn.className = 'clear-pixel';
            clearBtn.type = 'button';
            clearBtn.textContent = 'Clear';
            clearBtn.addEventListener('click', clearPixelCanvas);
            paletteRoot.appendChild(clearBtn);
        }

        function clearPixelCanvas() {
            pixelCtx.fillStyle = '#f2f2f2';
            pixelCtx.fillRect(0, 0, pixelCanvas.width, pixelCanvas.height);
        }

        function paintFromEvent(e) {
            const rect = pixelCanvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            const x = Math.floor(((clientX - rect.left) / rect.width) * pixelCanvas.width);
            const y = Math.floor(((clientY - rect.top) / rect.height) * pixelCanvas.height);

            if (x < 0 || y < 0 || x >= pixelCanvas.width || y >= pixelCanvas.height) return;
            pixelCtx.fillStyle = activeColor;
            pixelCtx.fillRect(x, y, pixelSize, pixelSize);
        }

        pixelCanvas.addEventListener('mousedown', (e) => {
            drawing = true;
            paintFromEvent(e);
        });

        window.addEventListener('mouseup', () => {
            drawing = false;
        });

        pixelCanvas.addEventListener('mousemove', (e) => {
            if (!drawing) return;
            paintFromEvent(e);
        });

        pixelCanvas.addEventListener('touchstart', (e) => {
            drawing = true;
            paintFromEvent(e);
            e.preventDefault();
        }, { passive: false });

        pixelCanvas.addEventListener('touchmove', (e) => {
            if (!drawing) return;
            paintFromEvent(e);
            e.preventDefault();
        }, { passive: false });

        window.addEventListener('touchend', () => {
            drawing = false;
        });

        // --------------------------------------------------------
        // LIVE DATE TIME
        // --------------------------------------------------------
        const liveTime = document.getElementById('live-time');

        function updateLiveTime() {
            const now = new Date();
            const timeFmt = new Intl.DateTimeFormat(undefined, {
                hour: 'numeric',
                minute: '2-digit'
            }).format(now);
            const dayFmt = new Intl.DateTimeFormat(undefined, {
                weekday: 'short',
                month: 'short',
                day: 'numeric'
            }).format(now);
            liveTime.textContent = `${timeFmt} ${dayFmt}`;
        }

        // Init
        window.addEventListener('resize', resize);
        resize();
        requestAnimationFrame(draw);
        initCompanyDock();
        buildPalette();
        clearPixelCanvas();
        updateLiveTime();
        setInterval(updateLiveTime, 30000);
    </script>
</body>

</html>
